#!/bin/sh
#
# simple script to determine the correct distribution
# - there appears to be no clear way of doing this which is cross platform compatible
#
# Get release information (if possible)
if [ `rpm -q redhat-release >/dev/null 2>&1; echo $?` = 0 ]; then
    releasename=redhat
    release=`rpm -q redhat-release | sed -e 's;^redhat-release-;;' -e 's;-[0-9]*$;;'`
elif [ `rpm -q mandrake-release >/dev/null 2>&1; echo $?` = 0 ]; then
    releasename=mandrake
    release=`rpm -q mandrake-release | sed -e 's;^mandrake-release-;;' -e 's;-[0-9]*mdk$;;'`
elif [ `rpm -q yellowdog-release >/dev/null 2>&1; echo $?` = 0 ]; then
    releasename=yellowdog
    release=`rpm -q yellowdog-release | sed -e 's;^yellowdog-release-;;' -e 's;-[0-9]*$;;'`
else
    releasename=unknown
    release=0
fi

if [ `echo $release | grep -q '\.'` ]; then
    major=`echo $release | sed -e 's;\.[0-9]*$;;'`	# strip off trailing minor
    minor=`echo $release | sed -e 's;^[0-9]*\.;.;'`	# strip off leading major
else
    major=$release
    minor=
fi

#echo release=$release
#echo major=$major
#echo minor=$minor
 
echo ${releasename}-${major}${minor}
